<!DOCTYPE html>
<html class="no-js" lang="" xmlns="http://www.w3.org/1999/html">
 <head>
  <meta charset="utf-8"/>
  <meta content="ie=edge" http-equiv="x-ua-compatible"/>
  <title>
   H2Optimize
  </title>
  <meta content="" name="description"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <link rel="icon" type="image/png" href="static/images/logoDrop-rb.png">
  <link rel="icon" type="image/png" href="static/images/logoDrop-rb.png">
  <!-- Place favicon.ico in the root directory -->
  <!-- ========================= CSS here ========================= -->
  <link href="{{ url_for('static', filename='assets/css/bootstrap-5.0.5-alpha.min.css') }}" rel="stylesheet" />
<link href="{{ url_for('static', filename='assets/css/LineIcons.2.0.css') }}" rel="stylesheet" />
<link href="{{ url_for('static', filename='assets/css/animate.css') }}" rel="stylesheet" />
<link href="{{ url_for('static', filename='assets/css/tiny-slider.css') }}" rel="stylesheet" />
<link href="{{ url_for('static', filename='assets/css/main.css') }}" rel="stylesheet" />

 </head>
 <style>
  .navbar {
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.navbar-brand img {
    max-height: 100%;
    height: auto;
    margin-top: 0;
    display: block;
    max-width: 150px;
}

.navbar-nav {
    display: flex;
    align-items: center;
    list-style: none;
    margin: 0;
    padding: 0;

}

.navbar-nav .nav-item {
    margin-right: 20px;
}

.navbar-nav .nav-item .theme-btn {
    padding: 8px 20px;
    font-size: 15px;
    border-radius: 10px;
    background-color: #00ADB5;
    color: #fff;
    transition: background-color 0.3s ease, transform 0.3s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 40px;
    line-height: 1.2;
}

.navbar-nav .nav-item .theme-btn:hover {
    cursor: pointer;
    background-color: #ffffff;
    transform: translateY(-2px);
}

.navbar-nav .nav-item:last-child {
    margin-right: 0;
}
.card {
            background-color: #A9CCE3;
            background: -webkit-linear-gradient(to right, #D4E6F1, #A9CCE3);
            background: linear-gradient(to right, #D4E6F1, #A9CCE3);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 20px;
            width:  350px;
            height: 200px;
            cursor: pointer;
            margin-bottom: 200px;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h2 {
            margin-bottom: 10px;
            color: #154360;
        }

        .card p {
            margin: 0;
        }

        .button {
            background-color: #3498db;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            text-decoration: none;
        }

        .button:hover {
            background-color: #2980b9;
        }
        .img1 {
            width: 500px;
            height: 300px;
            margin-right: 20px;
            margin-left: 10px;
            border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            background-color: #A9CCE3;
        }
        .dataCard {
            display: flex;
            flex-direction: row;
            margin-bottom: 60px;
            height: 300px;
        }
        .mainCardOne {
            margin-left: 155px;
            width: 1000px;
            height: 300px;
            cursor: pointer;
            background-color: #fffff;
        }
         .input-row {
            display: flex;
            margin-left: 20px;
            margin: 10px;
        }

        .input-column {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        label {
            font-weight: bold;
            margin-left: 20px;
            color: #26435a;
        }

        input[type="number"] {
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #ddd;
            width: 200px;
            height: 20px;
            margin-left: 20px;
            margin-top: 20px;
        }

        .form {
            align-items: center;
            justify-content: center;
            display: flex;
        }

        .buttonProceed {
            width: 110px;
            height: 45px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #0b71d8;
            border-color: #0b71d8;
            border: none;
            color: #111213;
            margin-top: 30px;
        }

    .close {
        border: none;
        background: none;
        font-size: 1.5rem;
        color: #000;
    }

    .comments-section {
        padding: 15px;
        background-color: #f9f9f9;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .comment {
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 5px;
        background-color: #e9ecef;
    }

    .comment-username {
        font-weight: bold;
        margin-bottom: 5px;
    }
    .comment-section {
        padding: 15px;
        background-color: #f9f9f9;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .comments-section .comment {
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 5px;
        background-color: #e9ecef;
    }

    .comments-section .comment-username {
        font-weight: bold;
        margin-bottom: 5px;
    }

@media (max-width: 768px) {
    .navbar {
        height: auto;
    }
    .navbar-nav {
        flex-direction: column;
        margin-top: 10px;
    }
    .navbar-nav .nav-item {
        margin-right: 0;
        margin-bottom: 10px;
    }
}
 </style>
 <body>
  <!--[if lte IE 9]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
        <![endif]-->
  <!-- ========================= preloader start ========================= -->
  <div class="preloader">
   <div class="loader">
    <div class="ytp-spinner">
     <div class="ytp-spinner-container">
      <div class="ytp-spinner-rotator">
       <div class="ytp-spinner-left">
        <div class="ytp-spinner-circle">
        </div>
       </div>
       <div class="ytp-spinner-right">
        <div class="ytp-spinner-circle">
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
  <!-- ========================= preloader end =========================-->
  <!-- ========================= header start ========================= -->
  <header class="header" id="home">
   <div class="header-wrapper">
    <div class="header-top theme-bg">
     <div class="container">
      <div class="row">
       <div class="col-md-8">
        <div class="header-top-left text-center text-md-left">
         <ul>
          <li>
           <a href="#">
            <i class="lni lni-phone">
            </i>
            +03041234567
           </a>
          </li>
          <li>
           <a href="#">
            <i class="lni lni-envelope">
            </i>
            h2optimize@gmail.com
           </a>
          </li>
         </ul>
        </div>
       </div>
       <div class="col-md-4">
        <div class="header-top-right d-none d-md-block">
         <ul>
          <li>
           <a href="#">
            <i class="lni lni-facebook-filled">
            </i>
           </a>
          </li>
          <li>
           <a href="#">
            <i class="lni lni-twitter-filled">
            </i>
           </a>
          </li>
          <li>
           <a href="#">
            <i class="lni lni-linkedin-original">
            </i>
           </a>
          </li>
         </ul>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div class="navbar-area" style="height:-50px">
     <div class="container">
      <div class="row">
       <div class="col-lg-12">
        <nav class="navbar navbar-expand-sm">
         <a class="navbar-brand" href="index.html">
          <img alt="Logo" src="static/assets/img/logo/Logo3.png"/>
         </a>
         <div class="collapse navbar-collapse sub-menu-bar" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto" id="nav">
           <li class="nav-item active">
            <a class="page-scroll active" href="#home">
             Home
            </a>
           </li>
           <li class="nav-item">
            <a class="page-scroll" href="#about">
             About
            </a>
           </li>
           <li class="nav-item">
            <a class="page-scroll" href="#services">
             Sensors Guide
            </a>
           </li>
           <li class="nav-item">
            <a class="page-scroll" href="#team">
             Favorites
            </a>
           </li>
           <li class="nav-item">
            <a class="page-scroll" href="#contact">
             Contact
            </a>
           </li>
           <li class="nav-item">
            <a class="btn theme-btn page-scroll" data-animation="fadeInUp" data-delay=".9s" data-duration="1.5s" href="#contact">
             Get Started
            </a>
           </li>
          </ul>
         </div>
         <!-- ====================== navbar collapse =====================-->
        </nav>
        <!-- navbar -->
       </div>
      </div>
      <!-- row -->
     </div>
     <!-- container -->
    </div>
    <!-- navbar area -->
   </div>
   <br/>
   <br/>
   <br/>
   <br/>
    <!-- ========================= Main Card start ========================= -->

   <section style="margin-top:-190px;" class="service-section pt-150" id="services">
    <div class="shape shape-3">
     <img alt="" src="static/assets/img/shapes/shape-3.svg"/>
    </div>
    <div class="container">
     <div class="row">
      <div class="col-xl-8 mx-auto">
       <div class="section-title text-center mb-55">
        <span class="wow fadeInDown" data-wow-delay=".2s">
         Details
        </span>
        <h2 class="mb-15 wow fadeInUp" data-wow-delay=".4s">
         Follow Step-by-Step Solution
        </h2>
        <p class="wow fadeInUp" data-wow-delay=".6s">
         Save water, save life. Every drop counts
         <br class="d-none d-lg-block"/>

        </p>
       </div>
      </div>
     </div>
     <div  class="row">
      <div style="width:2700px;" class="col-lg-4 col-md-6">
       <div class="service-item mb-30">
         <div class="service-icon mb-25">
            <img src="static/assets/img/bg/idea.png" alt="Water Icon" style="width: 70.285px; height: 58.102px;">
        </div>
        <div class="service-content">
         {% if method_name and description %}
             <h4>{{ method_name }}</h4>
             <p>{{ description }}</p>
         {% else %}
             <p>{{ error or "No recommendation details available." }}</p>
         {% endif %}
             <a class="read-more" href="javascript:void(0);" onclick="toggleCommentSection('{{ method_name }}')">
                 Add Comment
                 <i class="lni lni-arrow-right"></i>
             </a>

         <div class="icons" style="margin-bottom: 50px; float: right; width: 30px; height: 30px;">
           <button
             class="heartIcon"
             style="background: none; border: none; padding: 0;"
             onclick="toggleFavorite('{{ method_name }}', '{{ description }}', this)"
             data-method-name="{{ method_name }}"
             data-description="{{ description }}">
             <img onclick="toggleFavorite('{{ method_name }}', '{{ description }}', this)" src="static/assets/img/bg/heart.png" alt="Heart Icon" style="width: 100%; height: auto;">
           </button>
           <p onclick="toggleFavorite('{{ method_name }}', '{{ description }}', this)" style="margin-top: 5px; margin-right:2px; cursor: pointer;">Save</p>
         </div>

         </div>
        <div class="service-overlay img-bg">
        </div>
       </div>
      </div>

     </div>
    </div>
   </section>
    <!-- ========================= Main Card end ========================= -->


    <!-- ========================= Comment Section Modal ================= -->
   <div id="comment-section-{{ method_name }}" class="comment-section" style="display: none; margin-top: 20px;">
        <h5>Leave a Comment:</h5>
        <textarea id="commentInput-{{ method_name }}" placeholder="Write your comment here..." rows="3" style="width: 100%;"></textarea>
        <button class="btn btn-primary" onclick="submitComment('{{ method_name }}')">Submit Comment</button>
    </div>


    <!-- ============== Comments Display Section ========================= -->

    <div id="comments-{{ method_name }}" class="comments-section" style="margin-top: 20px;">
    {% if comments %}
        {% for comment_id, comment_data in comments.items() %}
            <div class="comment">
                <strong>{{ comment_data.username }}:</strong>
                <p>{{ comment_data.comment }}</p>
            </div>
        {% endfor %}
    {% else %}
        <p>No comments yet. Be the first to comment!</p>
    {% endif %}
    </div>


       <div id="recommendation-details"></div>
      <!-- ========================= footer start ========================= -->
   <footer class="footer pt-100 img-bg" style="background-image:url('static/assets/img/bg/footer-bg.jpg');">
    <div class="container">
     <div class="footer-widget-wrapper">
      <div class="row">
       <div class="col-xl-4 col-lg-5 col-md-6">
        <div class="footer-widget mb-30">
         <a class="logo" href="index.html">
          <img alt="" src="static/assets/img/logo/logo.svg">
          </img>
         </a>
         <p>
          Lorem ipsum dolor serit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut
								labore dolore magna
								aliquyam erat diam voluptua.
         </p>
         <div class="footer-social-links">
          <ul>
           <li>
            <a href="#">
             <i class="lni lni-facebook-filled">
             </i>
            </a>
           </li>
           <li>
            <a href="#">
             <i class="lni lni-twitter-filled">
             </i>
            </a>
           </li>
           <li>
            <a href="#">
             <i class="lni lni-linkedin-original">
             </i>
            </a>
           </li>
           <li>
            <a href="#">
             <i class="lni lni-instagram-original">
             </i>
            </a>
           </li>
          </ul>
         </div>
        </div>
       </div>
       <div class="col-xl-2 col-lg-3 col-md-6">
        <div class="footer-widget mb-30">
         <h4>
          Quick Link
         </h4>
         <ul class="footer-links">
          <li>
           <a href="#">
            Home
           </a>
          </li>
          <li>
           <a href="#">
            About Us
           </a>
          </li>
          <li>
           <a href="#">
            Solutions
           </a>
          </li>
          <li>
           <a href="#">
            Users Category
           </a>
          </li>
          <li>
           <a href="#">
            Contact
           </a>
          </li>
         </ul>
        </div>
       </div>
       <div class="col-xl-2 col-lg-3 col-md-5">
        <div class="footer-widget mb-30">
         <h4>
          Quick Link
         </h4>
         <ul class="footer-links">
          <li>
           <a href="#">

           </a>
          </li>
          <li>
           <a href="#">

           </a>
          </li>
          <li>
           <a href="#">

           </a>
          </li>
          <li>
           <a href="#">

           </a>
          </li>
          <li>
           <a href="#">

           </a>
          </li>
          <li>
           <a href="#">

           </a>
          </li>
         </ul>
        </div>
       </div>
       <div class="col-xl-4 col-lg-12 col-md-7">
        <div class="footer-widget mb-30">
         <h4>
          Our Location
         </h4>
         <div class="map-canvas">
          <iframe class="map" id="gmap_canvas" src="https://www.google.com/maps/place/COMSATS+University/@31.4027337,74.2100689,17z/data=!3m1!4b1!4m6!3m5!1s0x3918ffd0bc7c5f71:0x879e9b82857bcd94!8m2!3d31.4027291!4d74.2126438!16s%2Fg%2F1tf9r6c0?entry=ttu&g_ep=EgoyMDI0MTExMy4xIKXMDSoASAFQAw%3D%3D&amp;t=&amp;z=13&amp;ie=UTF8&amp;iwloc=&amp;output=embed">
          </iframe>
         </div>
        </div>
       </div>
      </div>
     </div>
    </div>
   </footer>
       <div id="popup" class="popup">
            <div class="popup-content">
                <span class="close-popup" onclick="closePopup()">&times;</span>
                <p id="popup-message"></p>
                <button onclick="closePopup()">OK</button>
            </div>
       </div>
   <!-- ========================= footer end ========================= -->
   <!-- ============================ JS here ========================= -->
   <script src="static/assets/js/bootstrap.bundle-5.0.0.alpha-min.js">
   </script>
   <script src="static/assets/js/wow.min.js">
   </script>
   <script src="static/assets/js/tiny-slider.js">
   </script>
   <script src="static/assets/js/main.js">
   </script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
   </script>
   <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js">
   </script>
   <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js">
   </script>
   <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js">
   </script>
   <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script>
          //Handling Pop-up functions
         function displayPopup(message) {
            const popup = document.getElementById('popup');
            const popupMessage = document.getElementById('popup-message');
            popupMessage.textContent = message;
            popup.style.display = 'flex';
        }

        function closePopup() {
            const popup = document.getElementById('popup');
            popup.style.display = 'none';
        }
      </script>
   <script>

        function toggleFavorite(methodName, description, buttonElement) {
             const imgElement = buttonElement.querySelector('img');
             const textElement = buttonElement.nextElementSibling;

             const isSaving = imgElement.src.includes('heart.png');
             const route = isSaving ? '/save_favorite' : '/remove_favorite';
             const data = { method_name: methodName, ...(isSaving && { description }) }; // Include description only when saving

             console.log("Toggle Favorite Action:", isSaving ? "Save" : "Remove", data);

             fetch(route, {
                 method: 'POST',
                 headers: { 'Content-Type': 'application/json' },
                 body: JSON.stringify(data),
             })
                 .then((response) => response.json())
                 .then((data) => {
                     if (data.message) {
                         console.log(data.message);
                         displayPopup(data.message);

                         // Update UI elements
                         imgElement.src = isSaving
                             ? 'static/assets/img/bg/heartfill.png'
                             : 'static/assets/img/bg/heart.png';
                         textElement.textContent = isSaving ? 'Saved' : 'Save';
                     } else {
                         console.error("Error:", data.error);
                         displayPopup(data.error || 'An unknown error occurred.');
                     }
                 })
                 .catch((error) => {
                     console.error("Network Error:", error);
                     displayPopup('A network error occurred. Please try again.');
                 });
         }


          function displayPopup(message) {
              const popup = document.createElement('div');
              popup.style.position = 'fixed';
              popup.style.bottom = '20px';
              popup.style.right = '20px';
              popup.style.backgroundColor = '#4CAF50';
              popup.style.color = '#fff';
              popup.style.padding = '15px';
              popup.style.borderRadius = '5px';
              popup.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';
              popup.style.zIndex = '1000';
              popup.textContent = message;

              document.body.appendChild(popup);

              // Remove popup after 3 seconds
              setTimeout(() => {
                  popup.remove();
              }, 3000);
          }



       document.querySelectorAll('.heartIcon').forEach(button => {
               button.addEventListener('click', function() {
                   const methodName = this.getAttribute('data-method-name');
                   const description = this.getAttribute('data-description');
                   toggleFavorite(methodName, description, this);
               });
           });


   </script>
  <script>
        // Toggle comment section visibility
        function toggleCommentSection(methodName) {
            const commentSection = document.getElementById(`comment-section-${methodName}`);
            if (commentSection) {
                commentSection.style.display = commentSection.style.display === 'none' ? 'block' : 'none';
            }
        }

                // Submit a comment (updated)
                function submitComment(methodName) {
            const commentInput = document.getElementById(`commentInput-${methodName}`);
            const comment = commentInput.value.trim();

            if (comment) {
                fetch('/submit_comment', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ method_name: methodName, comment: comment }),
                })
                    .then((response) => response.json())
                    .then((data) => {
                        if (data.message) {
                            // Dynamically add the comment
                            const commentsDiv = document.getElementById(`comments-${methodName}`);
                            const commentElement = document.createElement('div');
                            commentElement.className = 'comment';
                            commentElement.innerHTML = `<strong>${data.username}:</strong> <p>${comment}</p>`;
                            commentsDiv.appendChild(commentElement);

                            commentInput.value = ''; // Clear the input field
                        } else {
                            alert(data.error || 'Error submitting comment.');
                        }
                    })
                    .catch(() => alert('Error submitting comment.'));
            } else {
                alert('Please write a comment before submitting.');
            }
        }



        // Fetch comments (updated)
        function fetchComments(methodName) {
            fetch(`https://h2optimize-3b6cd-default-rtdb.asia-southeast1.firebasedatabase.app/Comments/${methodName}.json`, {
                method: 'GET'
            })
            .then(response => response.json())
            .then(data => {
                const commentsDiv = document.getElementById(`comments-${methodName}`);
                commentsDiv.innerHTML = ''; // Clear existing comments

                if (data) {
                    // Loop through the comments and display them
                    Object.keys(data).forEach(commentId => {
                        const { comment } = data[commentId];

                        const commentElement = document.createElement('div');
                        commentElement.className = 'comment';

                        // Create the comment text element dynamically
                        const commentTextElement = document.createElement('p');
                        commentTextElement.textContent = comment; // Display the comment

                        commentElement.appendChild(commentTextElement);

                        commentsDiv.appendChild(commentElement);
                    });
                } else {
                    commentsDiv.innerHTML = '<p>No comments yet. Be the first to comment!</p>';
                }
            })
            .catch(() => alert('Error fetching comments.'));
        }
    </script>
    <script>
        $(document).ready(function() {
            $.get('/get_name', function(data) {
                // Do nothing with the response
            });
        });
    </script>


      </header>
 </body>
</html>
